Hi there!

This is a snippet of some of the data processing I worked on for my honours BSc thesis! Data was exported from AlignRT's Optical Surface Monitoring System (OSMS) for 4 patients (1 tongue cancer, 3 larynx cancer) undergoing volumetric modulated arc therapy (VMAT) at our institution. This system consists of 3 cameras and projectors which measure real-time body surface movement information in 3 cardinal translations and 3 axis rotations. AlignRT matches the current position to the reference position, which can be a surface imported from DICOM or captured using AlignRT, and halts the radiation beam when it detects that patient motion has exceeded a certain threshold. This is achieved by projecting a speckle pattern upon the user-defined region of interest (ROI), calculating the translations and rotations necessary to match the surfaces through a rigid body registration algorithm. The output consists of log files containing Real-Time Deltas (RTDs) displaying the delta shifts in a vertical or anterior-posterior (AP) shift, a longitudinal or superior-inferior (SI) shift, and a lateral or left-right (LR) shift, as well as rotations about the treatment isocenter for pitch, roll, and yaw. These parameters (as well as various other parameters such as total translation, amplitude, beam state, and root mean squared) are recorded each time a shift is detected, thus having varying time intervals of about 7 seconds. 

At our institution, gantry angles above the horizontal of 0º to 90º and 270º to 360º blocked optical surface cameras A, B, and C, determined through patient treatment data in ARIA. Data falling under these angles were skewed or appeared as “N/A”, and thus were removed. Intrafractional data was gathered by averaging the initial 10 points of OSMS data while the treatment beam was active, then subtracting the following points by that value to determine the positional variance from the start position during treatment. This allows us to ensure each patient’s breathing cycle is filtered out. For interfractional data, the mean of the initial 10 points of OSMS data where the treatment beam was inactive was calculated.

This cleaned data was then used in intrafractional motion analyses to determine the magnitude by which movement in each direction exceeds clinical thresholds of 3º and 3mm. The goal of our study was to determine whether the OSMS system was accurate in tracking intrafractional and interfractional motion, as well as investigating the effectiveness of shoulder cantilever depression systems in immobilization and reproducing patient positioning. 

The code itself is a little redundant and could use some optimization, however I was in a bit of a time crunch to get all the data processing done in time, as data collection took up the majority of the year. However, from these analyses (as well as interfractional motion analyses, which are not included here due to being very messy), we were able to determine that immobilization of the shoulders has demonstrated adequate accuracy using a shoulder cantilever depression system for larynx cancer patients undergoing VMAT. However, utilizing AlignRT for patient setup in our study was not feasible due to our region of interest (ROI) limitations, thus parameters influencing surface-guided systems should be evaluated carefully in future studies. 

Feel free to contact me if you have any questions, thank you!

